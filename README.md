# Mineville

Здравствуйте. Так как кода весьма много, хотел бы упомянуть наиболее интересные места и отметить те места, которые еще совершенно пока что закончены и имеют лишь временные затычки. Код с последними изменениями находится в ветке **dev**.

Проект представляет собой небольшую игру, являющейся помесью minecraft и градостроительных симуляторов. Он разделен на несколько слоев, которые запускаются последовательно из точки входа в программу: слой прогрузки низкоуровневых библиотек и инициализации окна (он буквально пара строк на данный момент) => слой прогрузки ресурсов (ru.peytob.mineville.model.loader) => слой логики приложения. К сожалению, пока что закомментировал лишь кусок классов в модели и все математике. Комментирую те части, в которых точно уверен, что они являются +- окончательной версией.

Проект пока что не использует Spring, однако в нем используется весьма распространенные библиотеки: GSON для сериализации / десериализации данных из JSON; reflections для механизмов рефлексии; junit. В скором времени будут добавлены AnnotationProcessors.

## Примечательные пакеты

+ Пакет загрузчика: ru.peytob.mineville.model.loader. Модуль отвечает за прогрузку данных в иной модуль, ответственный за хранение данных: ru.peytob.mineville.model.repository. Он пока что не закончен до конца, но уже примечателен тем, что для своей работы использует механизмы рефлексии. Он, исследуя заданные ему пакеты, ищет все классы, помеченные определенными аннотациями. После чего создает объекты данных классов, упаковывает их в иммутабельные структуры и засовывает в репозитории. Пока что он поддерживает лишь загрузку стандартных ресурсов, имеющихся в проекте, но в будущем будет поддерживать загрузку данных из пользовательских .jar файлов.

+ Математический модуль: ru.peytob.mineville.math. В данном модуле представлены классы для работы с математикой. Интерфейсы классов используют удобный формат цепных вызовов. Классы используют только примитивные типы и имеют раскрытые циклы - это дает некоторую дополнительную производительность (на моей машине, если не изменяет память, около 20% вышло) в критических участках кода. Большая часть работы движка сводится к просчетам матриц и вектров. В целом, самый законченный модуль из всех. Возможно, в будущем, выделю его в отдельную библиотеку.

## Примеры реализации паттернов

+ Паттерн "Состояние" используется в классе ru.peytob.mineville.controller.game.Game. В пакете с данным классом имеется пакет с состояниями. Пока что имеются 2 состояния - основное и тестовое.

+ Паттерн "Синглтон" используется в классе ru.peytob.mineville.model.repository.GameRegistry.

+ Паттерн "Строитель" имеет несколько разных вариантов - когда создается конструктор типа "public MyClass(MyClassBuilder)": класс ru.peytob.mineville.model.game.object.Block и его билдер: ru.peytob.mineville.model.game.object.BlockBuilder. Имеется класс ru.peytob.mineville.model.loader.base.BaseBlock как иной вариант того же билдера. Иной вариант билдера, когда используется условный метод MyClassBuilder::build в классах из пакета ru.peytob.mineville.model.game.builder.

+ Паттерн Listener - все методы формата on... (например onMouseClick) в классах ru.peytob.mineville.controller.game.Game и его состояниях. Возможно, будет декомпозиция в будущем, чтобы немного более строго соблюдать SOLID.
